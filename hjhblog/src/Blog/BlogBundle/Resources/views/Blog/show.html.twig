{% extends 'BlogBundle::layout.html.twig' %}

{% block title %}{{ blog.title }}{% endblock %}

{% block body %}
    <article class="blog">
        <header>
            <div class="date">
                <time datetime="{{ blog.created|date('c') }}">{{ blog.created|date('l, F j, Y') }}</time>
                {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                    {% if blog.blogger.id == app.user.id %}
                        <div class="pull-right"><a href="{{ path('BlogBundle_blog_remove', {'blog_id':blog.id}) }}"><span class="glyphicon glyphicon-remove"> </span></a>
                        </div>
                        <div class="pull-right"><a href="{{ path('BlogBundle_blog_edit', {'blog_id':blog.id}) }}"><span class="glyphicon glyphicon-edit"> </span></a>
                        </div>

                    {% endif %}
                {% endif %}
            </div>
            <h2>{{ blog.title }}</h2>
        </header>
        <img src="{{ asset(['images/', blog.image]|join) }}" alt="{{ blog.title }} image not found" class="large" />
        <div>
            <p>{{ blog.content|raw }}</p>
        </div>
    </article>


    <section class="comments" id="comments">
        <section class="previous-comments">
            <h3>Comments</h3>
            {% include 'BlogBundle:Comment:index.html.twig' with { 'comments': comments } %}

        <h3>Add Comment</h3>
        {% render(controller('BlogBundle:Comment:new', { 'blog_id': blog.id })) %}
        </section>
    </section>
{% endblock %}